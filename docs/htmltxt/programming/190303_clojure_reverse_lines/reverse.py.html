<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
body {
    font-family: monospace;
}
.pre {
    white-space: pre-wrap;
}
    </style>
    <script>
up = false;
prev = false;
next = false;
window.document.onkeydown = function(e) {
    if (e.key == 'Backspace')
        history.back();
    if (e.key == 'i')
        if (up)
            window.location.href = up;
    if (e.key == 'ArrowLeft')
        if (prev)
            window.location.href = prev;
    if (e.key == 'ArrowRight')
        if (next)
            window.location.href = next;
};
    </script>
  </head>
  <body>
    <ul>
      <li><a href="index.html">/programming/190303_clojure_reverse_lines/</a> (reverse.py)</li>
      <script>up='index.html'</script>
      <li><a href="001.clj.html">prev: 001.clj</a></li>
      <script>prev='001.clj.html'</script>
      <li>(no next)</li>
    </ul>
    <div class="pre">import os
import sys

def reverse_file(path):
    assert os.path.exists(path)
    assert os.path.isfile(path)
    abspath = os.path.abspath(path)
    print(abspath)
    with open(abspath) as f:
        s_old = f.read()
    s_new = reverse_lines(s_old)
    with open(abspath, &quot;w&quot;) as f:
        f.write(s_new)

def reverse_lines(s):
    liness = s.split(&quot;\n\n&quot;);
    def f(s):
        lines = s.split(&quot;\n&quot;)
        r = reversed(lines)
        return &quot;\n&quot;.join(r)
    liness = [f(x) for x in liness]
    s_new = &quot;\n\n&quot;.join(liness)
    return s_new

if __name__ == &quot;__main__&quot;:
    assert len(sys.argv) == 2
    reverse_file(sys.argv[1])
</div>
  </body>
</html>
